/*var lilongwesites = {
    "KCH":[-13.9508611, 33.78586111, "#fcc", "square"],
    "Bwaila":[-13.9908611, 33.77477778, "#cfc", "square"],
    "Ngoni":[-13.69491667, 33.68522222, "#ccf", "circle"],
    "M'bang'ombe":[-13.71694444, 33.71391667, "#99f", "circle"],
    "St Gabriel":[-13.99978889, 33.53594444, "#c9f", "circle"],
    "Macro":[-13.9908611, 33.77477778, "#ccf", "circle"],
    "Area 25":[-13.9508611, 33.41477778, "#ccf", "circle"],
    "Baobab Office":[-13.971789, 33.759542, "#ccf", "circle"]
};*/
 
var lilongwesites = {}; 
 
var lilongwe = function(ctx, color, sites) {
    ctx.save();
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(499.99982,0);
    ctx.lineTo(499.99982,523.3371);
    ctx.lineTo(0,523.3371);
    ctx.closePath();
    ctx.clip();
    ctx.strokeStyle = 'rgba(0,0,0,0)';
    ctx.lineCap = 'butt';
    ctx.lineJoin = 'miter';
    ctx.miterLimit = 4;
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.translate(-18.571511,-29.265076);
    ctx.save();
    ctx.fillStyle = (typeof(color) != "undefined" ? color : "rgba(118, 104, 79, 0.94)");
    ctx.strokeStyle = "#000000";
    ctx.lineWidth = 2;
    ctx.miterLimit = 4;
    ctx.beginPath();
    ctx.moveTo(209.79049,541.23506);
    ctx.bezierCurveTo(203.11371,528.0083599999999,199.9683,524.22078,188.75298,515.9024099999999);
    ctx.bezierCurveTo(183.28233,511.84482999999994,176.3004,505.46685999999994,173.23765,501.7291499999999);
    ctx.bezierCurveTo(164.9195,491.5779499999999,159.22686,486.5578999999999,149.27118000000002,480.5942499999999);
    ctx.bezierCurveTo(130.57019000000003,469.39204999999987,129.30786,468.23926999999986,125.99327000000002,459.33751999999987);
    ctx.bezierCurveTo(118.84040000000002,440.1276399999999,96.76849400000003,402.0219999999999,82.35869400000001,384.0053799999999);
    ctx.bezierCurveTo(72.39391400000001,371.5464299999999,64.50915400000001,356.3605799999999,63.53985400000001,347.7607099999999);
    ctx.bezierCurveTo(62.94771400000001,342.5072699999999,63.586354000000014,339.8414399999999,66.71684400000001,334.4996699999999);
    ctx.bezierCurveTo(71.79162400000001,325.8402099999999,71.65570400000001,321.6021999999999,65.98076400000001,311.5467499999999);
    ctx.lineTo(61.32650400000001,303.2998799999999);
    ctx.lineTo(66.729674,295.4547599999999);
    ctx.bezierCurveTo(69.701414,291.1399199999999,72.132844,285.9129799999999,72.132844,283.8392899999999);
    ctx.bezierCurveTo(72.132844,281.7655599999999,68.990284,275.0311499999999,65.149404,268.8739199999999);
    ctx.bezierCurveTo(61.308514,262.7166799999999,56.53032400000001,253.6689899999999,54.531254000000004,248.7679999999999);
    ctx.bezierCurveTo(50.069704,237.8301499999999,44.464724000000004,229.5582899999999,32.772964,216.65720999999988);
    ctx.bezierCurveTo(18.756264,201.19061999999988,18.512094,200.26543999999987,24.001944,183.42151999999987);
    ctx.bezierCurveTo(26.532144000000002,175.65842999999987,30.060244,165.44846999999987,31.842164000000004,160.73272999999986);
    ctx.bezierCurveTo(34.879324000000004,152.69501999999986,34.929114000000006,151.92534999999987,32.637754,148.42832999999987);
    ctx.bezierCurveTo(29.081474,143.00078999999988,29.539274000000002,140.57787999999988,36.031194,130.46756999999988);
    ctx.bezierCurveTo(39.241934,125.46730999999988,42.346323999999996,119.69108999999989,42.929834,117.63157999999989);
    ctx.bezierCurveTo(43.513374,115.57205999999988,46.615624,111.43726999999988,49.823734,108.44313999999989);
    ctx.bezierCurveTo(53.689364000000005,104.83538999999989,55.656644,101.69555999999989,55.656644,99.13382699999988);
    ctx.bezierCurveTo(55.656644,94.27523699999988,62.212304,86.71861699999988,72.684054,79.50643699999989);
    ctx.bezierCurveTo(77.12014400000001,76.4511569999999,81.57510400000001,72.15250699999989,82.58391400000001,69.95387699999989);
    ctx.bezierCurveTo(83.592764,67.7552469999999,84.77649400000001,59.216109999999894,85.21442400000001,50.97800999999989);
    ctx.bezierCurveTo(86.23753400000001,31.73268999999989,86.885754,30.459959999999892,95.03204400000001,31.70210999999989);
    ctx.bezierCurveTo(98.50172400000001,32.23117999999989,102.16961,33.31740999999989,103.18290000000002,34.11596999999989);
    ctx.bezierCurveTo(104.46113000000001,35.12326999999989,105.02190000000002,41.13761999999989,105.01435000000002,53.75774999999989);
    ctx.bezierCurveTo(105.00175000000002,72.98323699999989,105.50420000000003,75.75693699999988,111.86404000000002,91.65411699999989);
    ctx.bezierCurveTo(115.26608000000002,100.15781999999989,115.72489000000002,103.02042999999989,114.92750000000002,110.76707999999988);
    ctx.bezierCurveTo(113.70044000000003,122.68752999999988,116.89953000000003,129.61925999999988,124.51948000000002,131.55081999999987);
    ctx.bezierCurveTo(127.38218000000002,132.27644999999987,132.22864,135.13259999999988,135.28937000000002,137.89782999999989);
    ctx.bezierCurveTo(138.40739000000002,140.7147199999999,143.31048,143.3862199999999,146.44007000000002,143.9733199999999);
    ctx.bezierCurveTo(154.65372000000002,145.51421999999988,183.15982000000002,143.5367399999999,190.68835,140.9037899999999);
    ctx.bezierCurveTo(194.27076000000002,139.6509299999999,203.26805000000002,137.5697799999999,210.68233,136.27900999999991);
    ctx.bezierCurveTo(231.75390000000002,132.61061999999993,247.54526,128.24502999999993,254.61154,124.13455999999991);
    ctx.bezierCurveTo(258.17737999999997,122.06028999999991,261.39786,120.66609999999991,261.76814,121.03637999999991);
    ctx.bezierCurveTo(262.13847000000004,121.40669999999992,261.76514000000003,123.48785999999991,260.93892,125.6612799999999);
    ctx.bezierCurveTo(258.97675,130.8222499999999,260.54175,138.3256099999999,263.96207,140.1561299999999);
    ctx.bezierCurveTo(265.72373,141.0989699999999,266.99978,144.0871499999999,267.61717,148.7154899999999);
    ctx.bezierCurveTo(269.73867,164.6200899999999,274.31998999999996,169.4643299999999,285.97774,168.1296999999999);
    ctx.bezierCurveTo(291.2082,167.5308899999999,293.75541999999996,167.9392899999999,295.70752999999996,169.6892099999999);
    ctx.bezierCurveTo(300.16576,173.6858999999999,313.98141,173.9820299999999,321.47117999999995,170.24146999999988);
    ctx.bezierCurveTo(327.36457999999993,167.29815999999988,328.81663999999995,167.16730999999987,339.34105999999997,168.63111999999987);
    ctx.bezierCurveTo(345.64144,169.50743999999986,354.31994,171.86493999999988,358.6266,173.87000999999987);
    ctx.bezierCurveTo(362.93327,175.87508999999986,368.71414,177.52216999999987,371.47294999999997,177.53021999999987);
    ctx.bezierCurveTo(379.66848,177.55541999999988,386.17200999999994,181.74742999999987,397.54049999999995,194.33781999999988);
    ctx.bezierCurveTo(403.45221999999995,200.88500999999988,409.51802999999995,206.89948999999987,411.01995999999997,207.70328999999987);
    ctx.bezierCurveTo(413.04542,208.78725999999986,415.76761,208.19678999999988,421.55834,205.41742999999985);
    ctx.bezierCurveTo(426.68512999999996,202.95676999999986,435.13937999999996,200.88789999999986,446.18074,199.39204999999984);
    ctx.bezierCurveTo(462.69733,197.15441999999985,472.40766,193.76689999999985,476.52455000000003,188.80631999999983);
    ctx.bezierCurveTo(481.02715,183.38104999999982,483.84002000000004,183.13696999999982,490.84695000000005,187.56365999999983);
    ctx.bezierCurveTo(494.51266000000004,189.87950999999984,497.51308000000006,192.39170999999982,497.51455000000004,193.14640999999983);
    ctx.bezierCurveTo(497.51555,193.90106999999983,494.48409000000004,199.38492999999983,490.77695000000006,205.33279999999982);
    ctx.bezierCurveTo(482.98564000000005,217.8334799999998,482.35265000000004,221.9137199999998,487.8788200000001,224.01474999999982);
    ctx.bezierCurveTo(494.1146500000001,226.38561999999982,498.20839000000007,225.73983999999982,507.31702000000007,220.94839999999982);
    ctx.bezierCurveTo(512.05046,218.45845999999983,516.16601,216.66404999999983,516.4627700000001,216.9608099999998);
    ctx.bezierCurveTo(516.7597000000001,217.25731999999982,511.3049500000001,224.0981299999998,504.3415100000001,232.1620899999998);
    ctx.bezierCurveTo(497.3780700000001,240.2260999999998,491.28631000000007,248.6196599999998,490.80421000000007,250.8145099999998);
    ctx.bezierCurveTo(490.32216000000005,253.00936999999982,487.2542200000001,258.7443199999998,483.98656000000005,263.5589099999998);
    ctx.bezierCurveTo(480.7189000000001,268.3734599999998,478.03508000000005,274.0752299999998,478.02245000000005,276.2295299999998);
    ctx.bezierCurveTo(477.99305000000004,281.56265999999977,476.70459000000005,283.1771099999998,470.39122000000003,285.8054499999998);
    ctx.bezierCurveTo(466.35099,287.48741999999976,461.56769,292.5945799999998,451.47252000000003,306.0050999999998);
    ctx.bezierCurveTo(444.04134000000005,315.8767699999998,437.17851,326.3254499999998,436.22179000000006,329.2243799999998);
    ctx.bezierCurveTo(435.2650300000001,332.12334999999985,431.1332100000001,338.3223499999998,427.03998000000007,342.99992999999984);
    ctx.bezierCurveTo(419.3711200000001,351.76356999999985,415.1364700000001,358.59098999999986,415.1364700000001,362.1917399999998);
    ctx.bezierCurveTo(415.1364700000001,368.08953999999983,401.64321000000007,373.9632199999998,383.1391200000001,376.1202399999998);
    ctx.bezierCurveTo(367.7966800000001,377.9087399999998,358.8481700000001,389.1669299999998,356.56139000000013,409.5578299999998);
    ctx.bezierCurveTo(355.87346000000014,415.6925399999998,354.50535000000013,421.2094899999998,353.5212100000001,421.8177399999998);
    ctx.bezierCurveTo(352.5371000000001,422.4259399999998,348.6417800000001,423.37292999999977,344.86502000000013,423.9221199999998);
    ctx.bezierCurveTo(341.0882100000001,424.47131999999976,336.5052500000001,425.8791799999998,334.6806800000001,427.05070999999975);
    ctx.bezierCurveTo(332.55675000000014,428.41440999999975,327.26724000000013,429.18072999999976,319.97831000000014,429.18072999999976);
    ctx.bezierCurveTo(313.7166100000001,429.18072999999976,307.1211900000001,429.9429699999998,305.32178000000016,430.87460999999973);
    ctx.bezierCurveTo(303.52238000000017,431.80620999999974,297.33192000000014,437.08900999999975,291.56527000000017,442.6140599999997);
    ctx.bezierCurveTo(279.03632000000016,454.6181799999997,271.30883000000017,459.83277999999973,262.71232000000015,462.0844199999997);
    ctx.bezierCurveTo(251.62554000000014,464.9883399999997,241.90338000000014,475.9601299999997,236.08090000000016,492.13879999999966);
    ctx.bezierCurveTo(234.75646000000015,495.81893999999966,232.40840000000014,506.82128999999964,230.86302000000015,516.5884999999996);
    ctx.bezierCurveTo(228.37774000000016,532.2958199999996,227.41049000000015,535.2801799999996,222.48892000000015,542.4260899999996);
    ctx.bezierCurveTo(219.42856000000015,546.8695999999995,216.37236000000016,550.5051599999996,215.69735000000014,550.5051599999996);
    ctx.bezierCurveTo(215.02229000000014,550.5051599999996,212.36426000000014,546.3336199999995,209.79049000000015,541.2350599999996);
    ctx.lineTo(209.79049000000015,541.2350599999996);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
    
    if(typeof(sites) != "undefined"){
        var pos = 1;
        for(var site in sites){
            var position = sites[site];
            var scale = ctx.canvas.width * 100 / 31;
            
            var x = Math.abs((Math.abs(position[1]) - Math.abs(gpscoords["lilongwe"][1]))) * scale;
            var y = Math.abs((Math.abs(position[0]) - Math.abs(gpscoords["lilongwe"][0]))) * scale;
            var radius = 25;
            
            ctx.fillStyle = position[2];
            ctx.strokeStyle = "#000000";
            ctx.lineWidth = 1;
            ctx.miterLimit = 4;
            ctx.beginPath();
            
            var offsetX = 0;
            var offsetY = 0;
            switch(position[3]){
                case "circle":
                    ctx.arc(x, y, radius, 0, 2 * Math.PI, false);
                    offsetX = radius + 5;
                    offsetY = -radius / 2;
                    break;
                case "square":
                    ctx.moveTo(x,y);
                    ctx.lineTo(x+(radius*2),y);
                    ctx.lineTo(x+(radius*2),y+(radius*2));
                    ctx.lineTo(x,y+(radius*2));
                    ctx.lineTo(x,y);    
                    offsetX = (radius * 2) + 5;
                    offsetY = radius;
                    break;
            }            
            
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            ctx.textBaseline = 'top';
            ctx.font         = 'normal 20px sans-serif';
            ctx.strokeText(alpha[pos], x + offsetX, y + offsetY);
            
            pos++;
        }
    }
    
    ctx.restore();
    ctx.restore();
    ctx.restore();
};