/*var mzimbasites = {
    "Macro Mzuzu":[-11.46525, 33.61461111, "#99f", "circle"]
};*/

var mzimbasites = {};

var mzimba = function(ctx, color, sites) {
    ctx.save();
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(236.79785,0);
    ctx.lineTo(236.79785,500);
    ctx.lineTo(0,500);
    ctx.closePath();
    ctx.clip();
    ctx.strokeStyle = 'rgba(0,0,0,0)';
    ctx.lineCap = 'butt';
    ctx.lineJoin = 'miter';
    ctx.miterLimit = 4;
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.restore();
    ctx.save();
    ctx.translate(-129.02955,-41.505039);
    ctx.save();
    ctx.fillStyle = (typeof(color) != "undefined" ? color : "rgba(118, 104, 79, 0.94)");
    ctx.strokeStyle = "#000000";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(231.5434,527.95235);
    ctx.bezierCurveTo(216.04456,514.95755,214.2757,510.01378,221.17327,498.96903000000003);
    ctx.bezierCurveTo(224.57568,493.52089,224.57568,490.72727000000003,221.17327,485.27913);
    ctx.bezierCurveTo(215.34064,475.93964,215.76457,472.58287,223.79023,464.55721);
    ctx.bezierCurveTo(234.5625,453.78496,232.65793000000002,440.2901,218.80545,429.23717);
    ctx.bezierCurveTo(208.88405,421.32085,203.5945,419.76107,186.67055,419.76107);
    ctx.bezierCurveTo(169.94986999999998,419.76107,165.1035,418.36827,158.91957,411.78579);
    ctx.bezierCurveTo(154.60711999999998,407.1954,151.4272,399.3489,151.4272,393.29827);
    ctx.bezierCurveTo(151.4272,387.51654,148.32592,378.84339,144.53549,374.02462);
    ctx.bezierCurveTo(135.99048000000002,363.16143000000005,135.99900000000002,362.35254000000003,144.93414,336.09028);
    ctx.bezierCurveTo(150.97843,318.32494,152.20983,306.62495,152.13843000000003,267.63935000000004);
    ctx.bezierCurveTo(152.04893000000004,218.77966000000004,149.62425000000002,208.19737000000003,137.64743000000004,204.39606000000003);
    ctx.bezierCurveTo(127.76717000000005,201.26019000000002,127.76447000000005,175.18280000000004,137.64243000000005,169.01308000000003);
    ctx.bezierCurveTo(141.43288000000004,166.64591000000004,144.53416000000004,162.54520000000002,144.53416000000004,159.90035000000003);
    ctx.bezierCurveTo(144.53416000000004,157.25553000000002,151.51201000000003,141.86290000000002,160.04052000000004,125.69452000000004);
    ctx.bezierCurveTo(168.56901000000005,109.52616000000003,175.54688000000004,93.09560000000005,175.54688000000004,89.18221000000004);
    ctx.bezierCurveTo(175.54688000000004,84.92934000000004,177.78584000000004,82.06695000000003,181.11240000000004,82.06695000000003);
    ctx.bezierCurveTo(184.17342000000005,82.06695000000003,191.68794000000003,76.59724000000003,197.81132000000002,69.91208000000003);
    ctx.lineTo(208.94474000000002,57.75721700000003);
    ctx.lineTo(227.98953000000003,62.71777000000003);
    ctx.bezierCurveTo(238.46419000000003,65.44605000000003,250.20671000000004,69.65949000000003,254.08404000000002,72.08092000000003);
    ctx.bezierCurveTo(259.83230000000003,75.67076000000003,262.14796,75.64176000000003,266.62781,71.92389000000003);
    ctx.bezierCurveTo(269.64957,69.41606000000003,271.71377,64.85745000000003,271.21495,61.79364700000003);
    ctx.bezierCurveTo(270.46366,57.17919700000003,274.44813,56.06188700000003,294.42899,55.284037000000026);
    ctx.bezierCurveTo(313.61158,54.53724700000003,319.73742,52.93001700000003,324.34977,47.43375700000003);
    ctx.bezierCurveTo(330.09862999999996,40.583147000000025,330.25737,40.61720700000003,342.44052999999997,51.31415700000003);
    ctx.bezierCurveTo(356.43017999999995,63.59725000000003,356.77808,65.46060000000003,349.23150999999996,87.68849000000003);
    ctx.bezierCurveTo(342.07120999999995,108.77867000000003,346.92526999999995,148.13256000000004,357.95431999999994,158.40765000000005);
    ctx.bezierCurveTo(366.8546999999999,166.69963000000004,366.8483099999999,168.89040000000006,357.9073199999999,174.47412000000006);
    ctx.bezierCurveTo(352.0982599999999,178.10194000000007,349.7457099999999,178.11690000000004,345.4518599999999,174.55322000000007);
    ctx.bezierCurveTo(341.0341899999999,170.88687000000007,339.0829999999999,171.48758000000007,333.6613599999999,178.18300000000008);
    ctx.bezierCurveTo(330.08814999999987,182.5957400000001,327.16460999999987,188.3603200000001,327.16460999999987,190.9932000000001);
    ctx.bezierCurveTo(327.16460999999987,194.37362000000007,322.5815699999999,195.78024000000008,311.56757999999985,195.78024000000008);
    ctx.bezierCurveTo(297.63834999999983,195.78024000000008,294.2844499999999,197.46632000000008,280.2027899999998,211.54799000000008);
    ctx.bezierCurveTo(264.85934999999984,226.8914200000001,264.4988799999998,227.74144000000007,266.80740999999983,243.13581000000008);
    ctx.bezierCurveTo(269.5850599999998,261.6584700000001,276.5382299999998,273.60766000000007,285.97477999999984,276.0753800000001);
    ctx.bezierCurveTo(295.63401999999985,278.6013400000001,294.27151999999984,288.3937900000001,283.7016899999998,292.4124500000001);
    ctx.bezierCurveTo(276.0603199999998,295.3176800000001,275.04513999999983,297.2607200000001,276.9950099999998,305.2491200000001);
    ctx.bezierCurveTo(278.2587399999998,310.4264000000001,279.2801599999998,317.7158400000001,279.2648999999998,321.44789000000014);
    ctx.bezierCurveTo(279.2503999999998,325.17994000000016,280.7892199999998,329.19269000000014,282.68621999999976,330.36512000000016);
    ctx.bezierCurveTo(284.82630999999975,331.68777000000017,283.8212299999998,336.52881000000014,280.0379299999998,343.12086000000016);
    ctx.bezierCurveTo(274.1945399999998,353.30236000000014,274.2008399999998,354.2908400000002,280.1894099999998,366.84889000000015);
    ctx.lineTo(286.4382399999998,379.95282000000014);
    ctx.lineTo(277.2437499999998,387.86159000000015);
    ctx.bezierCurveTo(271.6715499999998,392.65461000000016,267.4831599999998,400.33435000000014,266.6123699999998,407.35515000000015);
    ctx.bezierCurveTo(265.1129799999998,419.4439800000001,267.64495999999986,421.55384000000015,291.8366199999998,428.3743000000002);
    ctx.bezierCurveTo(296.5428999999998,429.70117000000016,300.3823799999998,434.1858900000002,301.6221999999998,439.80440000000016);
    ctx.bezierCurveTo(307.2631899999998,465.36736000000013,310.5435699999998,471.46725000000015,319.6792399999998,473.38152000000014);
    ctx.bezierCurveTo(324.74382999999983,474.4427700000001,331.9399899999998,476.9927500000001,335.6706699999998,479.04810000000015);
    ctx.bezierCurveTo(339.4013699999998,481.10347000000013,346.3792399999998,483.85848000000016,351.1770499999998,485.17028000000016);
    ctx.bezierCurveTo(359.0095799999998,487.31186000000014,357.2529399999998,488.78457000000014,333.97399999999976,499.5931400000002);
    ctx.bezierCurveTo(318.00378999999975,507.0082100000002,305.64618999999976,515.2960200000002,301.79403999999977,521.1751000000002);
    ctx.bezierCurveTo(296.10543999999976,529.8570000000002,294.22271999999975,530.5217000000001,280.95555999999976,528.5321800000002);
    ctx.bezierCurveTo(269.3033999999998,526.7848000000001,264.57859999999977,527.7547100000002,257.45826999999974,533.3555600000002);
    ctx.bezierCurveTo(252.55642999999975,537.2113500000002,248.01508999999973,540.3357200000002,247.36642999999975,540.2986500000002);
    ctx.bezierCurveTo(246.71773999999976,540.2615500000002,239.59678999999974,534.7057100000002,231.54210999999975,527.9523300000002);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
    ctx.restore();
    ctx.restore();
    ctx.restore();
    
    if(typeof(sites) != "undefined"){
        var pos = 1;
        for(var site in sites){
            var position = sites[site];
            var scale = ctx.canvas.width * 100 / 15;
            
            var x = Math.abs((Math.abs(position[1]) - Math.abs(gpscoords["mzimba"][1]))) * scale;
            var y = Math.abs((Math.abs(position[0]) - Math.abs(gpscoords["mzimba"][0]))) * scale;
            var radius = 25;
            
            ctx.fillStyle = position[2];
            ctx.strokeStyle = "#000000";
            ctx.lineWidth = 1;
            ctx.miterLimit = 4;
            ctx.beginPath();
            
            var offsetX = 0;
            var offsetY = 0;
            switch(position[3]){
                case "circle":
                    ctx.arc(x, y, radius, 0, 2 * Math.PI, false);
                    offsetX = radius + 5;
                    offsetY = -radius / 2;
                    break;
                case "square":
                    ctx.moveTo(x,y);
                    ctx.lineTo(x+(radius*2),y);
                    ctx.lineTo(x+(radius*2),y+(radius*2));
                    ctx.lineTo(x,y+(radius*2));
                    ctx.lineTo(x,y);    
                    offsetX = (radius * 2) + 5;
                    offsetY = radius;
                    break;
            }            
            
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            ctx.textBaseline = 'top';
            ctx.font         = 'normal 20px sans-serif';
            ctx.strokeText(alpha[pos], x + offsetX, y + offsetY);
            
            pos++;
        }
    }
};